<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sorting Algorithm Visualizer</title>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f6f7fb;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      text-align: center;
      padding: 1.5rem;
      color: #222;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    button, select {
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      background-color: #4f46e5;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s ease-in-out;
    }

    button:hover, select:hover {
      background-color: #4338ca;
    }

    #bars {
      display: flex;
      align-items: flex-end;
      height: 300px;
      width: 80%;
      border: 1px solid #ddd;
      background: white;
      border-radius: 10px;
      overflow: hidden;
      padding: 5px;
    }

    .bar {
      flex: 1;
      margin: 0 1px;
      background: #60a5fa;
      transition: height 0.2s ease, background 0.2s ease;
    }

    .bar.compare {
      background: #facc15;
    }

    .bar.swap {
      background: #ef4444;
    }

    footer {
      margin-top: 2rem;
      color: #555;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Sorting Algorithm Visualizer</h1>
    <p>Watch Bubble Sort in action â€” visualize each comparison and swap!</p>
  </header>

  <div class="controls">
    <button id="generate">Generate Array</button>
    <button id="sort">Start Sorting</button>
    <select id="size">
      <option value="10">10 Bars</option>
      <option value="20" selected>20 Bars</option>
      <option value="30">30 Bars</option>
      <option value="40">40 Bars</option>
    </select>
    <label for="speed">Speed: </label>
    <input type="range" id="speed" min="50" max="1000" value="300">
  </div>

  <div id="bars"></div>

  <footer>
    <p>Built with HTML, CSS, and JavaScript ðŸŽ¨</p>
  </footer>

  <script>
    const barsContainer = document.getElementById('bars');
    const generateBtn = document.getElementById('generate');
    const sortBtn = document.getElementById('sort');
    const sizeSelect = document.getElementById('size');
    const speedSlider = document.getElementById('speed');
    let delay = parseInt(speedSlider.value);
    let array = [];

    // Generate a random array and render bars
    function generateBars(size = 20) {
      array = [];
      barsContainer.innerHTML = '';
      for (let i = 0; i < size; i++) {
        const value = Math.floor(Math.random() * 90) + 10;
        array.push(value);
        const bar = document.createElement('div');
        bar.classList.add('bar');
        bar.style.height = `${value * 3}px`;
        barsContainer.appendChild(bar);
      }
    }

    async function bubbleSort() {
      const bars = document.querySelectorAll('.bar');
      let n = array.length;
      for (let i = 0; i < n - 1; i++) {
        for (let j = 0; j < n - i - 1; j++) {
          bars[j].classList.add('compare');
          bars[j + 1].classList.add('compare');

          await new Promise(resolve => setTimeout(resolve, delay));

          if (array[j] > array[j + 1]) {
            bars[j].classList.remove('compare');
            bars[j + 1].classList.remove('compare');
            bars[j].classList.add('swap');
            bars[j + 1].classList.add('swap');

            await new Promise(resolve => setTimeout(resolve, delay));

            [array[j], array[j + 1]] = [array[j + 1], array[j]];
            bars[j].style.height = `${array[j] * 3}px`;
            bars[j + 1].style.height = `${array[j + 1] * 3}px`;

            await new Promise(resolve => setTimeout(resolve, delay));
          }

          bars[j].classList.remove('compare', 'swap');
          bars[j + 1].classList.remove('compare', 'swap');
        }
        bars[n - i - 1].style.background = '#22c55e'; // Mark as sorted
      }
      bars[0].style.background = '#22c55e'; // Last bar sorted
    }

    // Event listeners
    generateBtn.addEventListener('click', () => generateBars(parseInt(sizeSelect.value)));
    sortBtn.addEventListener('click', bubbleSort);
    sizeSelect.addEventListener('change', () => generateBars(parseInt(sizeSelect.value)));
    speedSlider.addEventListener('input', e => delay = parseInt(e.target.value));

    // Initialize
    generateBars();
  </script>
</body>
</html>
